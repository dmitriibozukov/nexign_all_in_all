## 1 - Автотесты API

Тесты покрывают ключевые сценарии работы всех сервисов:

### CDR Generator
- Генерация CDR файлов
- Проверка структуры CDR

### BRT Service
- Обработка данных о звонках
- Управление абонентами

### HRS Service
- Расчет стоимости звонков
- Управление тарифами

### CRM Service
- Создание абонентов
- Операции с балансом

**Запуск:**
bash
mvn test


## 2 - Тесты авторизации CDR

Проверяют загрузку CDR файлов в BRT сервис:

1. **Валидный файл**:
   - Формат: CSV с 10+ записями
   - Ожидание: 200 OK, 100% обработка

2. **Невалидный файл**:
   - Формат: Битый CSV
   - Ожидание: 400 Bad Request

**Запуск**:
bash
mvn test -Dtest=CdrAuthTest

## 3 - End-to-End тесты тарификации звонков

###  Тестовые сценарии

### Для тарифа "Классика"
1. **Исходящий звонок другому оператору**
   - Проверка списания: 2.5 у.е./мин
   - Округление длительности вверх

2. **Входящий звонок**
   - Проверка отсутствия списания

### Для тарифа "Помесячный" 
1. **Звонки в пределах пакета минут**
   - Проверка неизменности баланса
   - Учет использованных минут

2. **Превышение лимита**
   - Доплата по тарифу "Классика"

## 4 - CDR генератор валидных и невалидных данных

### Описание
Генератор тестовых данных в формате CDR (Call Data Record) для проверки биллинговой системы. Создает:
- Валидные записи звонков (100 записей)
- Невалидные записи с различными ошибками (20 записей)

### Ссылка на Colab
https://colab.research.google.com/drive/1UmJfC0Hz3tqNZL5U7VpkVNwEMyx4iK_v#scrollTo=lWGDjsHM8vob

### Файлы
- `valid_cdr.csv` - корректные данные
- `invalid_cdr.csv` - данные с ошибками
- `cdr_test_data.zip` - архив с обоими файлами

### Параметры
В коде можно настроить:
- Количество записей
- Диапазон длительности звонков
- Коды операторов

### Пример вывода
![image](https://github.com/user-attachments/assets/cdfb2fc0-d1f7-4edf-913e-98fa1cac070e)

## 5 - Microservices API Tests (CRM, BRT, HRS, CDR)

### Описание

Папка postman содержит экспортированную коллекцию тестов Postman, предназначенных для проверки API микросервисов CRM, BRT, HRS и CDR. Коллекция расширена и структурирована согласно методологии тестирования API с использованием Postman.


### Структура коллекции

Коллекция содержит следующие группы тестов:

### CRM
- Авторизация пользователя
- Получение баланса абонента
- Проверка истории транзакций

### BRT
- Прием CDR-файлов
- Сохранение данных в БД
- Расчет тарификации

### HRS
- Округление длительности звонков
- Расчет стоимости вызова
- Проверка тарифа "Классика"

### CDR
- Генерация CDR-файлов
- Проверка формата и структуры
- Отправка в очередь RabbitMQ

### Расширенные проверки Postman

Коллекция включает:

- Проверку статус-кодов и схем ответов
- Ассерты на поля JSON-ответов
- Переменные окружения для гибкой настройки
- Data-driven тестирование (заглушки)

### Установка и использование

1. Установить [Postman](https://www.postman.com/)
2. Импортировать файл `microservices_api_tests.postman_collection.json`
3. Настроить окружение (переменные base_url, token и т.д.)
4. Запустить тесты вручную или через Collection Runner



